---
title: "Harnessã®IaCã‚’èª¿æŸ»ã™ã‚‹ï¼ˆHarness Git Experienceï¼‰"
emoji: "ğŸ”¬"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["harness", "Terraform","CI/CD", "GitOps", "IaC"]
published: true
---
# ã¯ã˜ã‚ã«

Harnessã§è¤‡æ•°ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ãã«ã€ã„ã¡ã„ã¡GUIã§ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ï¼‘ã‹ã‚‰æ§‹ç¯‰ã—ã¦ã„ãã®ã¯SREçš„ãªè¦³ç‚¹ã‹ã‚‰ã¿ã‚‹ã¨ãƒˆã‚¤ãƒ«ã¨è¨€ã‚ã–ã‚‹ã‚’å¾—ãªã„

Harnessã®ãƒã‚¤ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ã§ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®cloneï¼ˆè¤‡è£½ï¼‰ã¯ã§ãã‚‹ãŒã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„ã‚¯ãƒ©ã‚¹ã‚¿ã®è¨­å®šå¤‰æ›´ãªã©å…¨ã¦ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã¯ã§ããªã„

ãã“ã§ã€Harnessã§æ§‹ç¯‰ã™ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è‡ªä½“ã‚’IaCã§ç®¡ç†ã™ã¹ãã€[Harness Git Experience](https://developer.harness.io/docs/category/git-experience)ã‚’ä¸­å¿ƒã«æŠ€è¡“æ¤œè¨¼ã‚’è¡Œã†

Harness Git Experienceã®æ¦‚è¦ã¯[ã“ã¡ã‚‰](https://developer.harness.io/docs/platform/git-experience/git-experience-overview/)ã‚’å‚ç…§

# èª¿æŸ»

[å…¬å¼quickstart](https://developer.harness.io/docs/platform/Git-Experience/configure-git-experience-for-harness-entities)ã‚’å…ƒã«[Harness Git Experience](https://developer.harness.io/docs/category/git-experience)ã§**å®Ÿç¾å‡ºæ¥ã‚‹ã“ã¨ãƒ»å‡ºæ¥ãªã„ã“ã¨**ã®èª¿æŸ»ã‚’è¡Œã†

## Github

ã¾ãšã¯ã€githubä¸Šã«ãƒªãƒã‚¸ãƒˆãƒªã®ä½œæˆã‚’è¡Œã„ã€Harnessãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹æˆã™ã‚‹yamlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç®¡ç†

ãã®å¾Œã€PATï¼ˆPersonal Access Tokenï¼‰ã‚’å–å¾—ã—ã¾ã™ã€‚
PATã«å¿…è¦ãªã‚¢ã‚¯ã‚»ã‚¹ã¯ä»¥ä¸‹
```
- repo
- user
```


## Harness

### PATï¼ˆPersonal Access Tokenï¼‰ã‚’å–å¾—
å–å¾—ã—ãŸPATã‚’å…ƒã«ã€å¯¾è±¡ãƒªãƒã‚¸ãƒˆãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’æŒã¤Github Connector ã‚’ä½œæˆã—ã¾ã™ï¼ˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä½œæˆã®é€”ä¸­ã§ã‚‚ä½œæˆå¯èƒ½ï¼‰

### Remote Pipelinesã‚’ä½œæˆ

â€»ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ä½œæˆã™ã‚‹å‰ã«ã€ä»¥ä¸‹ã®è¨­å®šã‚’Enableã«ã—ãªã„ã¨ã€gitã¸yamlãƒ•ã‚¡ã‚¤ãƒ«ãŒé€£æºã•ã‚Œãªã„ã®ã§ã€æ³¨æ„ãŒå¿…è¦

- `Allow different repo for Pipeline and InputSets`
- `Enforce git experience for pipelines and templates`

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2023-08-21 14.13.50.png](Harness%E3%81%AEIaC%E3%82%92%E8%AA%BF%E6%9F%BB%E3%81%99%E3%82%8B%EF%BC%88Harness%20Git%20Experience%EF%BC%89%20b798e7da69b04d4fa93322f98d68e104/%25E3%2582%25B9%25E3%2582%25AF%25E3%2583%25AA%25E3%2583%25BC%25E3%2583%25B3%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%2583%25E3%2583%2588_2023-08-21_14.13.50.png)

ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ä½œæˆ

ä»Šå›ã¯æŠ€è¡“æ¤œè¨¼ã®ãŸã‚ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚·ãƒ³ãƒ—ãƒ«ãªCDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰

- æ‰‹å‹•ã§Approval â†’ GKEã‚¯ãƒ©ã‚¹ã‚¿ã«ãƒ‡ãƒ—ãƒ­ã‚¤
    - GKEã‚¯ãƒ©ã‚¹ã‚¿ã¸ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹è¨­å®šãªã©ã¯ã“ã¡ã‚‰ã‚’å‚ç…§
        - [Harnessã§GKEã‚¯ãƒ©ã‚¹ã‚¿ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã¾ã§](https://www.notion.so/Harness-GKE-776ef3a32430416eb29ad03e6be079c3?pvs=21)

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2023-08-21 15.28.00.png](Harness%E3%81%AEIaC%E3%82%92%E8%AA%BF%E6%9F%BB%E3%81%99%E3%82%8B%EF%BC%88Harness%20Git%20Experience%EF%BC%89%20b798e7da69b04d4fa93322f98d68e104/%25E3%2582%25B9%25E3%2582%25AF%25E3%2583%25AA%25E3%2583%25BC%25E3%2583%25B3%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%2583%25E3%2583%2588_2023-08-21_15.28.00.png)

githubã®orgã®æ¨©é™ã«ã‚ˆã£ã¦ã¯ã€ä½œæˆã—ãŸPipelineã‚’ä¿å­˜ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ä»¥ä¸‹ã«ãªã£ãŸã€‚

ï¼ˆorgã§ã¯OAuthã®ã‚¢ã‚¯ã‚»ã‚¹ãŒè¨±å¯ã•ã‚Œã¦ã„ãªã‹ã£ãŸã®ã§ã€å€‹äººã®ãƒªãƒã‚¸ãƒˆãƒªã‚’æŒ‡å®šã—ãŸã‚‰è§£æ±ºï¼‰

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2023-08-18 16.26.54.png](Harness%E3%81%AEIaC%E3%82%92%E8%AA%BF%E6%9F%BB%E3%81%99%E3%82%8B%EF%BC%88Harness%20Git%20Experience%EF%BC%89%20b798e7da69b04d4fa93322f98d68e104/%25E3%2582%25B9%25E3%2582%25AF%25E3%2583%25AA%25E3%2583%25BC%25E3%2583%25B3%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%2583%25E3%2583%2588_2023-08-18_16.26.54.png)

Saveã™ã‚‹ã¨ã€ã©ã®ãƒ–ãƒ©ãƒ³ãƒã¸ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã‹èã‹ã‚Œã‚‹ã®ã§ã€ä»»æ„ã®ãƒ–ãƒ©ãƒ³ãƒã‚’é¸æŠ

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2023-08-21 14.22.38.png](Harness%E3%81%AEIaC%E3%82%92%E8%AA%BF%E6%9F%BB%E3%81%99%E3%82%8B%EF%BC%88Harness%20Git%20Experience%EF%BC%89%20b798e7da69b04d4fa93322f98d68e104/%25E3%2582%25B9%25E3%2582%25AF%25E3%2583%25AA%25E3%2583%25BC%25E3%2583%25B3%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%2583%25E3%2583%2588_2023-08-21_14.22.38.png)

gitãƒªãƒã‚¸ãƒˆãƒªä¸Šã«ä»¥ä¸‹ã®ã‚ˆã†ãª`.harness`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œæˆã•ã‚Œã‚‹ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åã¯Pipelineä½œæˆæ™‚ã«æŒ‡å®šå¯èƒ½ï¼‰

ã“ã®yamlãƒ•ã‚¡ã‚¤ãƒ«ã«æ§‹ç¯‰ã—ãŸãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒè¨˜è¿°ã•ã‚Œã‚‹

```
â”œâ”€â”€ .harness
â”‚Â Â  â””â”€â”€ harnessgitexperience.yaml
â””â”€â”€ README.md
```

ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å¤‰æ›´ã‚’commitã—ã€Pipelinesã®GitOpsãŒå®Ÿç¾ã™ã‚‹ã‹ç¢ºèª

ä¾‹ï¼špipelineã®nameã‚’å¤‰æ›´ã—ã€commit

```yaml
pipeline:
	name: harness-git-experience
```

Harnessä¸Šã§`Reload from Git`ã‚’ã—ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ›´æ–°ã‚’è¡Œã†

ref: [https://developer.harness.io/docs/platform/Git-Experience/harness-git-cache](https://developer.harness.io/docs/platform/Git-Experience/harness-git-cache)

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2023-08-21 14.31.33.png](Harness%E3%81%AEIaC%E3%82%92%E8%AA%BF%E6%9F%BB%E3%81%99%E3%82%8B%EF%BC%88Harness%20Git%20Experience%EF%BC%89%20b798e7da69b04d4fa93322f98d68e104/%25E3%2582%25B9%25E3%2582%25AF%25E3%2583%25AA%25E3%2583%25BC%25E3%2583%25B3%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%2583%25E3%2583%2588_2023-08-21_14.31.33.png)

ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®nameãŒå¤‰æ›´ã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèªã§ãã‚Œã°OK

# Harness Git Experience ã§å‡ºæ¥ã‚‹ã“ã¨

## Harnessãƒªã‚½ãƒ¼ã‚¹ã®Gitç®¡ç†

Harness Git Experience ã‚’ä½¿ç”¨ã—ã¦ã€æ¬¡ã® Harness ãƒªã‚½ãƒ¼ã‚¹ã‚’ Gitç®¡ç†ã§ãã‚‹

- [Pipelines](https://developer.harness.io/docs/platform/Git-Experience/import-a-pipeline)
- [Input sets](https://developer.harness.io/docs/platform/git-experience/import-a-template-from-git/)
- [Templates](https://developer.harness.io/docs/platform/git-experience/import-a-template-from-git/)ï¼ˆEnterPriseç‰ˆã®ã¿ï¼‰

ã¾ãŸã€Input setsã¨ãƒˆãƒªã‚¬ãƒ¼ã‚’æŒ‡å®šã—ãŸãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ§‹ç¯‰ï¼ˆGitç®¡ç†ï¼‰ã‚‚ã§ãã‚‹

[https://developer.harness.io/docs/platform/Git-Experience/manage-input-sets-in-simplified-git-experience](https://developer.harness.io/docs/platform/Git-Experience/manage-input-sets-in-simplified-git-experience)

## ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’Gitç®¡ç†ã«ç§»ç®¡

Gitç®¡ç†ã•ã‚Œã¦ã„ãªã„æ—¢å­˜ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨å…¥åŠ›ã‚»ãƒƒãƒˆã‚’Gitç®¡ç†ä¸‹ã«ç§»ç®¡ã™ã‚‹ã“ã¨ãŒã§ãã‚‹

[https://developer.harness.io/docs/platform/Git-Experience/move-inline-entities-to-git](https://developer.harness.io/docs/platform/Git-Experience/move-inline-entities-to-git)

## OAuthã¨ã®çµ±åˆ

[https://developer.harness.io/docs/platform/Git-Experience/oauth-integration](https://developer.harness.io/docs/platform/Git-Experience/oauth-integration)

# Harness Git Experience ã§å‡ºæ¥ãªã„ã“ã¨

## å¯¾è±¡å¤–Harnessãƒªã‚½ãƒ¼ã‚¹ã®Gitç®¡ç†

Pipelinesã‚„Templatesã¯gitç®¡ç†å¯èƒ½ã ãŒã€Organizationã‚„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨ã®ç–é€šã«å¿…è¦ã‚„Connectorsãªã©ã®ä¸»è¦ãªãƒªã‚½ãƒ¼ã‚¹ã¯Gitç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ããªã„

ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒªã‚½ãƒ¼ã‚¹ã®GitOpsã¨ã¯ç•°ãªã‚‹æ–‡è„ˆã ãŒã€Terraformã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ãŒå¯èƒ½ã§ã‚ã‚‹

```yaml
- Organizations
- Projects
- Delegates
- Connectors
- Secrets
- Variables
- Services
- Environments
- Infrastructure Definitions
- Pipelines
- Templates
- Permissions
```

[Harness Terraform Provider overview | Harness Developer Hub](https://developer.harness.io/docs/platform/Resource-Development/Terraform/harness-terraform-provider-overview)

ã¤ã¾ã‚Šã€Harnessãƒªã‚½ãƒ¼ã‚¹å…¨ä½“ã®IaCã‚’å®Ÿç¾ã—ãŸã„å ´åˆã«ã¯ã€Harness Git Experienceã ã‘ã§ã¯ä¸ååˆ†ã€‚ã—ã‹ã—ã€Terraformã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

# æ³¨æ„ç‚¹

[Harness Git Ops](https://developer.harness.io/docs/category/gitops) â‰  [Harness Git Experience](https://developer.harness.io/docs/category/git-experience)

åå‰ã¨ãƒ‘ãƒƒã¨è¦‹ã®èª¬æ˜ãŒä¼¼ã¦ã„ã‚‹ã®ã§æ³¨æ„

[Harness Git Ops](https://developer.harness.io/docs/category/gitops)

- Harnessã§ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ã‚¯ãƒ©ã‚¹ã‚¿ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã®GitOpsã‚’å®Ÿç¾
- ArgoCDã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸

[Harness Git Experience](https://developer.harness.io/docs/category/git-experience)

- Harnessã§æ§‹ç¯‰ã™ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è‡ªä½“ã‚’GitOpsã§å®Ÿç¾ã™ã‚‹

# ã¾ã¨ã‚

Harness Git Experienceã§ã¯ã€Harnessãƒªã‚½ãƒ¼ã‚¹ã®ã™ã¹ã¦ã‚’IaCã«ã™ã‚‹ã“ã¨ã¯å‡ºæ¥ãªã„

ã¾ãŸã€Harnessãƒªã‚½ãƒ¼ã‚¹ã®æ§‹æˆç®¡ç†ã‚„ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã‚’ã™ã‚‹ã¨ã„ã†è¦³ç‚¹ã«ãŠã„ã¦ã¯ã€Terraformã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

ã‚ã¨ã€Harnessã®YAMLã‚’ç›´æ¥ç·¨é›†ã™ã‚‹ã®ã¯ã€å€‹äººçš„ã«ã¯ã™ã”ãã‚ã‹ã‚Šã¥ã‚‰ã„ã—ã€æ›¸ãã¥ã‚‰ã„ã€‚ã€‚ã€‚

# Reference

[Git Experience | Harness Developer Hub](https://developer.harness.io/docs/category/git-experience)