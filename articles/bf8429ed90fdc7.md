---
title: "Kanikoå…¥é–€"
emoji: "ğŸˆ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---
# ã¯ã˜ã‚ã«
Kanikoã¨ã¯ï¼Ÿ
https://github.com/GoogleContainerTools/kaniko#--compressed-caching

# Kanikoã®ï¼’é¢æ€§
## ã‚­ãƒ£ãƒƒã‚·ãƒ¥


## ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã®build
ã“ã‚“ãªä½¿ã„æ–¹ã‚‚
https://note.com/cyberz_cto/n/nad7d0cdb8e30

# Kanikoæœ€é©åŒ–
ä¸å¿…è¦ãªãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒèµ°ã£ã¦ã„ã‚‹ã®ã§ã‚ªãƒ•ã«ã—ã¦ã‚ã’ã‚‹

`1          skaffold config set --global collect-metrics false`

ç¾è¡Œç’°å¢ƒã§æ™‚é–“ãŒã‹ã‹ã£ã¦ã‚‹é …ç›®ã«é–¢ã™ã‚‹æ´—ã„å‡ºã—

å½±éŸ¿åº¦å¤šã„ã§ã‚ã‚ã†é † - ä¸Šè¨˜äºŒã¤ã¯ãƒ•ã‚¡ã‚¤ãƒ«æ•°ãŒå°‘ãªã„ã¨ã‚ã¾ã‚Šæ„å‘³ã¯ãªã„

- `useNewRun: false` - trueã«ã€‚FSã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ä½¿ç”¨ã›ãšå¤‰æ›´ã‚’æ¤œçŸ¥ [Release v1.0.0 Â· GoogleContainerTools/kaniko](https://github.com/GoogleContainerTools/kaniko/releases/tag/v1.0.0)
- `snapshotMode` - full/redo/time - redoã§ã‚‚ã„ã„ã‹ã‚‚ã—ã‚Œãªã„ useNewRunã¨ã®ä½µç”¨âŒ
- `cache.cacheCopyLayers` - ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã®å¤§ãã„COPYãŒã‚ã‚‹å ´åˆã€falseã«ã™ã‚‹ã¨ã„ã„ ä½†ã—ã€å°ã•ã„ã‚µã‚¤ã‚ºã®COPYã—ã‹ãªã„å ´åˆã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦ã—ã¾ã£ãŸæ–¹ãŒã„ã„ [kaniko: add caching copy layers back**CLOSED**](https://github.com/GoogleContainerTools/kaniko/pull/1518)
- `skipUnusedStages:`Â `false` â†’ å¿…è¦ã®ãªã„ã‚¹ãƒ†ãƒ¼ã‚¸ã®ã¿ãŒbuildã§ä½¿ç”¨ã•ã‚Œã‚‹ (ç¾è¡Œç’°å¢ƒã§ã¯ã‚ã¾ã‚Šé–¢ä¿‚ãªã„ãŒã€æ˜ç¤ºçš„ã«trueã«ã—ã¨ã) useNewRunã¨ã®ä½µç”¨âŒ
- `singleSnapshot: false` - true / useNewRunã¨ä½µç”¨

**ãã®ä»–ãƒ•ãƒ©ã‚°**

- -compressed-caching - skaffoldã§é¸æŠãƒ•ãƒ©ã‚°ãªã—, ãƒ“ãƒ«ãƒ‰æ™‚é–“ã¨ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ• (v1.6.0ä»¥ä¸Š) [GoogleContainerTools/kaniko](https://github.com/GoogleContainerTools/kaniko#--compressed-caching)
- -log-timestamp falseã«ãªã£ã¦ã„ã‚‹ â†’ ~~ã‚ªãƒ³ã«ã—ã¦ã‚‚ã„ã„ã‹ã‚‚~~ ãƒ“ãƒ«ãƒ‰æ™‚é–“ãŒä¸æ˜ã«ãªã‚‹ã®ã§Ã—

[Kaniko Performance Testing. **AREA/PERFORMANCE**](https://github.com/GoogleContainerTools/kaniko/issues/1305)

# å‚è€ƒ


https://orisano.hatenablog.com/entry/2019/05/20/120032

